/*! created by chhuangxiaolong@jd.com */
webpackJsonp([13],{0:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var d=e(1),r=i(d),n=e(2),u=(i(n),e(3)),l=i(u),o=e(6),f=i(o),s=e(10),c=i(s),h=e(21),m=i(h),p=e(24),g=i(p),v=e(25),y=i(v),_=e(33),w=i(_),L=e(65),O=i(L),x=e(66),I=i(x),C=e(67),S=i(C),A=e(13),B=i(A),R=e(15),b=i(R);window.$=r.default,(0,f.default)(),(0,g.default)(),(0,y.default)(),l.default.headerInit(),c.default.init(),(0,O.default)(),(0,I.default)();var z=(0,r.default)(".item-group").last(),G=z.attr("data-skus");B.default.getPriceData(G,function(t){"距结束"==(0,r.default)(".party-item").eq(0).attr("data-txt")?b.default.renderRushbuyPrice(t,G):b.default.renderRushBuyPPrice(t,G)}),B.default.getStockData(G,function(t){b.default.renderRushBuyStock(t)}),(0,S.default)();var P=new m.default;P.init(),(0,w.default)()},10:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(){var t,a={};(0,n.default)(".red-slider-wraper li").length>1&&(a={loop:!0,autoplay:5e3,autoplayDisableOnInteraction:!1,pagination:".red-slider-pagination",onImagesReady:function(){},onInit:function(){}}),(0,n.default)(".red-slider-wraper").length&&(t=new l.default(".red-slider-wraper",a)),"jdapp"!=f.default.CONFIG.VS&&(0,n.default)(window).bind("orientationchange",function(){(0,c.default)(t)})}var r=e(1),n=i(r),u=e(8),l=i(u),o=e(2),f=i(o),s=e(9),c=i(s);t.exports={init:d}},24:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(){var t,a=(0,u.default)(".item"),e=(0,u.default)("#go-top"),i=(0,u.default)("#count"),d=(0,u.default)("#now"),n=(0,u.default)("#back"),f=(0,u.default)("#total"),s=l.GLOBAL.SCROLL_OBJ;if(!l.CONFIG.ANIMA_SCROLL){var c,h;return(0,u.default)("#go-top").click(function(){(0,u.default)(window).scrollTop(0)}),void(0,u.default)(window).bind("scroll",function(){c=(0,u.default)(window).scrollTop(),h=(0,u.default)(window).height(),c>=h?e.removeClass("none"):e.addClass("none")})}if(s){r(),f.text(a.length),e.click(function(){e.find(".back").hasClass("none")||(s.scrollTo(0,!0),e.addClass("none"))}),s.addScrollstartHandler(function(){a=(0,u.default)(".item"),t=s.getViewHeight(),r()});var m=0,p=0;s.addScrollingHandler(function(){var a=s.getScrollTop();o[p]&&a>=o[p].top-t&&(p++,p>o.length&&(p=o.length));var r=p-1;o[r]&&a<=o[r].top-t&&p--;var u=p;u<=0&&(u=1),u!=m&&(d.text(u),m=u),u>=8?e.removeClass("none"):e.addClass("none"),i.removeClass("none"),n.addClass("none")}),s.addScrollendHandler(function(){var t=p;t<=0&&(t=1),t>=8?e.removeClass("none"):e.addClass("none"),i.addClass("none"),n.removeClass("none")})}}function r(){var t=(0,u.default)("#scroller"),a=(0,u.default)(".item");o.length=0,a.each(function(a,e){var i=(0,u.default)(this).offset().top-t.offset().top+(0,u.default)(this).height();o.push({top:i,index:a+1})})}var n=e(1),u=i(n),l=e(2),o=[];t.exports=d},25:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(){return l.default.CONFIG.ANIMA_SCROLL?void(l.default.GLOBAL.SCROLL_OBJ&&(l.default.GLOBAL.LAZY=f.default.animaScrollLazy.init({iscroller:l.default.GLOBAL.SCROLL_OBJ,load_sucess:function(t){var a=(0,n.default)(t).closest(".item"),e=a.find("img[data-logo-layzr]"),i=e.attr("data-logo-layzr");if(i){var d=new Image;d.onload=function(){e.attr("src",i)},d.src=i}},loadData:function(t){}}))):void(l.default.GLOBAL.LAZY=f.default.lazy.init({load_sucess:function(t){var a=(0,n.default)(t).closest(".item"),e=a.find("img[data-logo-layzr]"),i=e.attr("data-logo-layzr");if((0,n.default)(t).addClass("fadeIn"),i){var d=new Image;d.onload=function(){e.attr("src",i)},d.src=i}},loadData:function(t){}}))}var r=e(1),n=i(r),u=e(2),l=i(u),o=e(26),f=i(o),s=e(27);i(s);t.exports=d},26:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var d=e(1),r=i(d),n=e(2),u=i(n),l={init:function(t){var a=this,e={anim:!0};return r.default.extend(e,t),this.op=e,a.img.init(e)},img_each:function(t){var a=this;t.each(function(t,e){(0,r.default)(this).attr("data-layzr")&&a.inViewport(this)&&a.act(this)})},dataEach:function(t){var a=this;t.each(function(t,e){(0,r.default)(this).attr("data-xhr-layzr")&&a.inViewport(this)&&a.op.loadData&&a.op.loadData((0,r.default)(this))})},act:function(t){var a=(0,r.default)(t),e=this;if(!a.attr("loaded")){var i=new Image,d=a.attr("data-layzr");e.op.srcTransform&&e.op.srcTransform(d,t)&&(d=e.op.srcTransform(d,t)),i.onload=function(){a.attr("src",d).removeAttr("data-layzr"),e.op.load_sucess&&e.op.load_sucess(t,!0,i)},i.onerror=function(){e.op.load_sucess&&e.op.load_sucess(t,!1,i)},d&&(i.src=d),a.attr("loaded",!0)}},inViewport:function(t){var a=window.pageYOffset-u.default.CONFIG.PRE_LOAD,e=window.pageYOffset+window.innerHeight+u.default.CONFIG.PRE_LOAD,i=(0,r.default)(t).offset().top,d=i+(0,r.default)(t).height();return i>=a&&d<=e},refreshImg:function(){this.img.imgs=(0,r.default)("img[data-layzr]"),this.img_each(this.img.imgs),this.img.dataItem=(0,r.default)("*[data-xhr-layzr]"),this.dataEach(this.img.dataItem)},img:{imgs:(0,r.default)("img[data-layzr]"),dataItem:(0,r.default)("*[data-xhr-layzr]"),init:function(t){var a=this,e=null;return(0,r.default)(window).bind("scroll",function(){clearTimeout(e),e=setTimeout(function(){l.img_each(a.imgs),l.dataEach(a.dataItem)},300)}),l.img_each(a.imgs),l.dataEach(a.dataItem),l}}},o={init:function(t){var a=this,e={anim:!0};return r.default.extend(e,t),this.op=e,a.img.init(e)},img_each:function(t){var a=this;t.each(function(t,e){(0,r.default)(this).attr("data-layzr")&&a.inViewport(this)&&a.act(this)})},dataEach:function(t){var a=this;t.each(function(t,e){(0,r.default)(this).attr("data-xhr-layzr")&&a.inViewport(this)&&a.op.loadData&&a.op.loadData((0,r.default)(this))})},act:function(t){var a=(0,r.default)(t),e=this;if(!a.attr("loaded")){var i=new Image,d=a.attr("data-layzr");i.onload=function(){a.attr("src",d).removeAttr("data-layzr"),e.op.load_sucess&&e.op.load_sucess(t)},i.onerror=function(){e.op.load_sucess&&e.op.load_sucess(t)},d&&(i.src=d),a.attr("loaded",!0)}},inViewport:function(t){var a=(0,r.default)(t),e=this.img.scroll_view.offset().top-u.default.CONFIG.PRE_LOAD,i=this.img.scroll_view.offset().top+this.op.iscroller.getViewHeight()+u.default.CONFIG.PRE_LOAD,d=a.offset().top,n=d+a.height();return n<=i&&d>=e},refreshImg:function(){this.img.imgs=(0,r.default)("img[data-layzr]"),this.img_each(this.img.imgs),this.img.dataItem=(0,r.default)("*[data-xhr-layzr]"),this.dataEach(this.img.dataItem)},img:{imgs:(0,r.default)("img[data-layzr]"),dataItem:(0,r.default)("*[data-xhr-layzr]"),scroll_view:(0,r.default)("#scroll-view"),init:function(t){var a=this;return t.iscroller.addScrollendHandler(function(){o.img_each(a.imgs),o.dataEach(a.dataItem)}),o.img_each(a.imgs),o.dataEach(a.dataItem),o}}};t.exports={lazy:l,animaScrollLazy:o}},27:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(t){var a,e=0,i=t.attr("data-skus"),d=t.attr("data-xhr-layzr");"loading"!=d&&"loaded"!=d&&(t.attr("data-xhr-layzr","loading"),a=(0,o.default)(t.find(".swiper-container")),m.getPriceData(i,function(d){p.renderActPrice(d,i,t),e++,2==e&&r(t,a)}),m.getStockData(i,function(i){p.renderStock(i,t),e++,2==e&&r(t,a)}))}function r(t,a){var e=t.find("li[data-goods-id]");if(e.length>8)for(var i=e.length;i>8;i--)e.eq(i-1).remove();(0,u.default)(this).find("li[data-goods-id]").length<=s.default.CONFIG.ACTGOODS_MIN&&((0,u.default)(this).prev(".item").addClass("mb10"),(0,u.default)(this).remove()),(0,h.default)(a),s.default.GLOBAL.SCROLL_OBJ&&s.default.GLOBAL.SCROLL_OBJ.refresh(),t.attr("data-xhr-layzr","loaded")}var n=e(1),u=i(n),l=e(28),o=i(l),f=e(2),s=i(f),c=e(9),h=i(c),m=e(13),p=e(15);t.exports=d},28:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(t){var a=Swiper(t,{loop:!1,slidesPerView:"auto",freeMode:!0,preventClicks:!0,freeModeSticky:!0,freeModeMomentumRatio:.2,onInit:function(){},onClick:function(t){window.location.href=(0,n.default)(t.clickedSlide).find("a").attr("_href")}});return(0,n.default)(t).find("a").each(function(t,a){var e=(0,n.default)(this).attr("href");(0,n.default)(this).attr("_href",e).attr("href","javascript:;")}),"jdapp"!=l.default.CONFIG.VS&&(0,n.default)(window).bind("orientationchange",function(){var t=(0,n.default)("#goods-rec-wrapper li"),e=document.documentElement.clientWidth;t.css("width",Math.ceil(e/3.5)),(0,f.default)(a)}),a}var r=e(1),n=i(r),u=e(2),l=i(u),o=e(9),f=i(o);t.exports=d},33:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(){var t=(0,n.default)("body").attr("data-type");(0,n.default)("#footer-nav").length&&(0,n.default)("#footer-nav a").each(function(a,e){var i=(0,n.default)(this),d=i.attr("type");d==t?(i.closest("li").addClass("active"),i.append('<img src="'+i.attr("img_active")+'">')):i.append('<img src="'+i.attr("img")+'">')})}var r=e(1),n=i(r);t.exports=d},65:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function d(){(0,u.default)(".party-item").length&&((0,u.default)(".party-item").each(function(t,a){var e={};"距结束"==(0,u.default)(this).attr("data-txt")?e.type="0":e.type="1",e.disTime=parseInt((0,u.default)(this).attr("data-distime"),10),g.push(e)}),r(),p&&(clearInterval(p),p=null),p=setInterval(r,1e3))}function r(){var t=(0,u.default)("#party-timer"),a=g[o.default.GLOBAL.RUSH_BUY.indicator].disTime,e=m.default.timeTransform(a/1e3);(0,u.default)(".hour",t).eq(0).text(e.hour),(0,u.default)(".minute",t).eq(0).text(e.min),(0,u.default)(".second",t).eq(0).text(e.sec);for(var i=0;i<g.length;i++)g[i].disTime-=1e3;a<=0&&(clearInterval(p),p=null,s.default.getNewTime(function(t){window.location.href=window.location.href}))}Object.defineProperty(a,"__esModule",{value:!0});var n=e(1),u=i(n),l=e(2),o=i(l),f=e(13),s=i(f),c=e(15),h=(i(c),e(5)),m=i(h),p=null,g=o.default.GLOBAL.RUSH_BUY.disTimeArr;a.default=d},66:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var d=e(1),r=i(d),n=e(2),u=i(n),l=e(13),o=i(l),f=e(15),s=i(f),c=e(5),h=i(c),m=e(14),p=i(m),g=u.default.GLOBAL.RUSH_BUY.disTimeArr,v=(0,r.default)("body"),y=function(){1==g.length&&("0"==g[0].type?((0,r.default)(".party-remind").text("抢购中 先下单先得哦"),(0,r.default)("#timer-out .timer-txt").text("距结束")):((0,r.default)(".party-remind").text("即将开始 先下单先得哦"),(0,r.default)("#timer-out .timer-txt").text("距开始"))),(0,r.default)(".party-item").click(function(){var t=(0,r.default)(this);u.default.GLOBAL.RUSH_BUY.indicator=(0,r.default)(this).index(),(0,r.default)(".party-item").removeClass("active"),(0,r.default)(this).addClass("active"),(0,r.default)("#timer-out .timer-txt").text((0,r.default)(this).attr("data-txt")),"距结束"==t.attr("data-txt")?(0,r.default)(".party-remind").text("抢购中 先下单先得哦"):(0,r.default)(".party-remind").text("即将开始 先下单先得哦"),_(),p.default.showLoading({type:"load-fullscreen",loadingTxt:"数据获取中.."},function(t){(0,r.default)(".red-page").append(t)}),w(t)})},_=function(){var t=(0,r.default)("#party-timer"),a=g[u.default.GLOBAL.RUSH_BUY.indicator].disTime,e=h.default.timeTransform(a/1e3);(0,r.default)(".hour",t).eq(0).text(e.hour),(0,r.default)(".minute",t).eq(0).text(e.min),(0,r.default)(".second",t).eq(0).text(e.sec)},w=function(t){o.default.getRushBuyUsePage(1,function(a){if((0,r.default)("#rush-buy-list").html(""),(0,r.default)('<div class="page-wraper"></div>').html(a).appendTo("#rush-buy-list"),v.attr("data-page",1),""==(0,r.default)("#rush-buy-list").html()){var e='<div class="empty"><p>宝贝被抢光啦</p><p>下次早点来哟</p></div>';return(0,r.default)("#rush-buy-list").html(e),void"body".attr("data-total-page","1")}u.default.GLOBAL.LAZY.refreshImg(),(0,r.default)("body").attr("data-total-page",(0,r.default)("#rush-buy-list .item-group").attr("data-total-page"));var i=(0,r.default)(".item-group").last(),d=i.attr("data-skus");o.default.getPriceData(d,function(a){"距结束"==t.attr("data-txt")?s.default.renderRushbuyPrice(a,d):s.default.renderRushBuyPPrice(a,d)}),o.default.getStockData(d,function(t){s.default.renderRushBuyStock(t)}),p.default.hideLoading("load-fullscreen")})};a.default=y},67:function(t,a,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var d=e(1),r=i(d),n=e(2),u=i(n),l=e(13),o=i(l),f=e(15),s=i(f),c=e(5),h=(i(c),e(14)),m=(i(h),!1),p=u.default.GLOBAL.LAZY,g=function(){var t=(0,r.default)(window).scrollTop(),a=(0,r.default)(document).height(),e=(0,r.default)(window).height(),i=(0,r.default)("body");if(t>=a-e-500){if(m)return;m=!0;var d=parseInt(i.attr("data-page"),10)+1,n=parseInt(i.attr("data-total-page"),10);if(d>n)return void(m=!1);o.default.getRushBuyMorePage(function(t){(0,r.default)('<div class="page-wraper"></div>').html(t).appendTo("#rush-buy-list"),p.refreshImg();var a=(0,r.default)(".item-group").last(),e=a.attr("data-skus");o.default.getPriceData(e,function(t){"抢购中"==(0,r.default)(".party-item.active").find(".party-txt").text()?s.default.renderRushbuyPrice(t,e):s.default.renderRushBuyPPrice(t,e)}),o.default.getStockData(e,function(t){s.default.renderRushBuyStock(t)}),m=!1})}},v=function(){(0,r.default)("#rush-buy-list");g(),(0,r.default)(window).bind("scroll",g)};a.default=v}});
//# sourceMappingURL=rushBuy.js.map